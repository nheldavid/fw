<html>
  <head>
    <script src={{{appclient}}}></script>
    <script type="module" src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.esm.js"></script>
    <script nomodule src="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/dist/crayons/crayons.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@freshworks/crayons@v4/css/crayons-min.css" />
    <link rel="stylesheet" href="../styles/modal.css" />
  </head>
  <body>

    <div class="spinner">
      <fw-spinner size="large" color="green"></fw-spinner>
    </div>
    
    <div class="section-group" id="auftragsstatus-div">
      <div class="details-section">
        <div class="section-title">📋 Auftragsstatus</div>
        <div class="details-grid">
          <div class="detail-item">
            <div class="detail-label">Bestelldatum:</div>
            <div class="detail-value" id="bestelldatum"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Status:</div>
            <div class="detail-value" id="auftragsstatus"></div>
          </div>
          <div class="detail-item full-width">
            <div class="detail-label">Vertriebsweg:</div>
            <div class="detail-value" id="vertriebsweg"></div>
          </div>
          <div class="detail-item full-width">
            <div class="detail-label">Freitext:</div> 
            <div class="detail-value" id="freitext"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Molliwert:</div>
            <div class="detail-value" id="molliwert"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Erfassdatum:</div>
            <div class="detail-value" id="erfassdatum"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Rechnungsnummer:</div>
            <div class="detail-value" id="rechnungsnummer"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Trackingnummer:</div>
            <div class="detail-value" id="trackingnummer"></div>
          </div>
        </div>
      </div>
      <!-- OT Section -->
      <div class="details-section">
        <div class="section-title-details" onclick="toggleSection(this)">📊 Ordertracking</div>
        <div class="section-content">
          <div id="ot-items-container">
            <div class="cart-item ot-item">
              <!-- All <div class="cart-item ot-item"> elements go here -->
            </div>
          </div>
        </div>
      </div>  
      <!-- Gutscheine Section -->
      <div class="details-section" >
        <div class="section-title-details" onclick="toggleSection(this)">🎫 Gutscheine</div>
        <div class="section-content">
          <div id="gutscheine-items-container">
            <!-- All <div class="cart-item gutscheine-item"> elements go here -->
          </div>
        </div>
        <div id="gutscheine-total-container">
          <!-- Gutscheine total will be populated here -->
        </div>
      </div>
      <!-- Kopfpauschalen Section -->
      <div class="details-section" >
        <div class="section-title-details" onclick="toggleSection(this)">💰 Kopfpauschalen</div>
        <div class="section-content">
          <div id="kopfpauschalen-items-container">
            <!-- All <div class="cart-item pauschale-item"> elements go here -->
          </div>
          <div id="kopfpauschalen-total-container">
            <!-- Kopfpauschalen total will be populated here -->
          </div>
        </div>
      </div>
    </div>

    <div class="section-group" id="warenkorb-div">
      <div class="details-section">
        <div class="section-title">🛒 Warenkorb</div>
        <div class="details-grid">
          <div class="detail-item">
            <div class="detail-label">Auftragsnummer:</div>
            <div class="detail-value" id="warenkorb-auftragsnummer"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Bestellnummer:</div>
            <div class="detail-value" id="warenkorb-bestellnummer"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Lieferdatum:</div>
            <div class="detail-value" id="warenkorb-lieferdatum"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Zahlbetrag:</div>
            <div class="detail-value" id="warenkorb-zahlbetrag"></div>
          </div>
          <div class="detail-item full-width">
            <div class="detail-label">Kartentext:</div>
            <div class="detail-value" id="warenkorb-kartentext"></div>
          </div>                 
        </div>
        
      </div>

      <div class="details-section">
        <!-- Service Level Item with visible/hidden fields -->
        <div class="cart-item ot-item">
            <div class="cart-item-header" onclick="toggleCartItem(this)">
              <span class="position-badge ot-badge">Service-Level</span>
              <span class="item-total">2 von 6 Services</span>
            </div>
            <div class="cart-item-content">
              <!-- Always visible fields -->
              <div class="details-grid">
                  <div class="detail-item">
                    <div class="detail-label">Basis Vermittler</div>
                    <div class="detail-value" id="v_zuk_bas">12</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Express Vermittler</div>
                    <div class="detail-value highlight" id="v_zuk_exp">5</div>
                  </div>
              </div>
              
              <!-- Hidden fields - shown when expanded -->
              <div class="hidden-service-fields collapsed">
                <div class="details-grid">
                  <div class="detail-item">
                    <div class="detail-label">Sonntag Vermittler</div>
                    <div class="detail-value" id="v_zuk_son">0</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Ausführender Basis</div>
                    <div class="detail-value" id="a_zuk_bas">8</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Express Ausführender</div>
                    <div class="detail-value highlight" id="a_zuk_exp">3</div>
                  </div>
                  <div class="detail-item">
                    <div class="detail-label">Sonntag Ausführender</div>
                    <div class="detail-value" id="a_zuk_son">0</div>
                  </div>
                </div>
              </div>
              
              <!-- Show more button -->
              <div class="show-more-section">
                <button class="show-more-btn" onclick="toggleHiddenServices(this)">
                  <span class="btn-text">4 weitere Services anzeigen</span>
                </button>
              </div>
            </div>
        </div>
      </div>

      <!-- Warenkorb Items -->
      <div class="details-section">
        <div class="section-title-details" onclick="toggleSection(this)">📦 Positionen</div>
        <div class="section-content">
          <div id="positionen-items-container">
          <!-- Cart Item  -->
          </div>
        </div>
      </div>
    </div>
    
    <div class="section-group"  id="ausfuehrung-div">
      <div class="section-title">🚛 Ausführung</div>
      <div class="details-grid">
        <div class="detail-item">
          <div class="detail-label">Nummer:</div>
          <div class="detail-value" id="ausfuehrung-nummer"></div>
        </div> 
        <div class="detail-item">
          <div class="detail-label">Name:</div>
          <div class="detail-value" id="ausfuehrung-name"></div>
        </div>
        <div class="detail-item">
          <div class="detail-label">Rang:</div>
          <div class="detail-value" id="ausfuehrung-rang"></div>
        </div>
        <div class="detail-item">
          <div class="detail-label">E-mail:</div>
          <div class="detail-value" id="ausfuehrung-email"></div>
        </div> 
        <div class="detail-item full-width">
          <div class="detail-label">Addresse:</div>
          <div class="detail-value" id="ausfuehrung-addresse"></div>
        </div>
        <div class="detail-item">
          <div class="detail-label">Telefon:</div>
          <div class="detail-value" id="ausfuehrung-telefon"></div>
        </div>
        <div class="detail-item">
          <div class="detail-label">Fax:</div>
          <div class="detail-value" id="ausfuehrung-fax"></div>
        </div>
        <div class="detail-item full-width">
          <div class="detail-label">Auftragshinweis:</div>
          <div class="detail-value" id="auftragshinweis"></div>
        </div>
        <div class="detail-item full-width">
          <div class="detail-label">Hinweis:</div>
          <div class="detail-value" id="hinweis"></div>
        </div>
      </div>
    </div>

    <div class="section-group" id="empfaenger-div">
      <div class="details-section">
        <div class="section-title">📍 Empfänger</div>
        <div class="details-grid">
          <div class="detail-item">
            <div class="detail-label">Name:</div>
            <div class="detail-value" id="empfaenger-name"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Firmenzusatz:</div>
            <div class="detail-value" id="empfaenger-firmenzusatz"></div>
          </div>
          <div class="detail-item full-width">
            <div class="detail-label">Addresse:</div>
            <div class="detail-value" id="empfaenger-addresse"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Telefon:</div>
            <div class="detail-value" id="empfaenger-telefon"></div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="section-group" id="auftraggeber-div">
      <div class="details-section">
        <div class="section-title">👤 Auftraggeber</div>
        <div class="details-grid">
          <div class="detail-item">
            <div class="detail-label">Name:</div>
            <div class="detail-value" id="auftraggeber-name"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Firmenzusatz:</div>
            <div class="detail-value" id="auftraggeber-firmenzusatz"></div>
          </div>
          <div class="detail-item full-width">
            <div class="detail-label">Addresse:</div>
            <div class="detail-value" id="auftraggeber-addresse"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Telefon:</div>
            <div class="detail-value" id="auftraggeber-telefon"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">E-mail:</div>
            <div class="detail-value" id="auftraggeber-email"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="section-group" id="vermittler-div">
      <div class="details-section">
        <div class="section-title">👨‍💼 Vermittler</div>
        <div class="details-grid">
          <div class="detail-item">
            <div class="detail-label">Nummer:</div>
            <div class="detail-value" id="vermittler-nummer"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Name:</div>
            <div class="detail-value" id="vermittler-name"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Typ:</div>
            <div class="detail-value" id="vermittler-typ"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Aktiv:</div>
            <div class="detail-value checkbox-field" id="vermittler-aktiv">
              <input type="checkbox" class="checkbox" checked>
              <span>Ja</span>
            </div>
          </div>
          <div class="detail-item full-width">
            <div class="detail-label">Addresse:</div>
            <div class="detail-value" id="vermittler-addresse"></div>
          </div>
          <div class="detail-item">
            <div class="detail-label">Telefon:</div>
            <div class="detail-value" id="vermittler-telefon"></div>
          </div>            
          <div class="detail-item">
            <div class="detail-label">Fax:</div>
            <div class="detail-value" id="vermittler-fax"></div>
          </div>
        </div>
      </div>
    </div>
  </body>

  <script src="../scripts/modal.js"></script>
  <script src="../scripts/data-utils.js"></script>
</html>